<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>
    Task 7. Advanced use of web storage
  </title>
</head>

<body>


	<script type="application/javascript">

		const availableItems = ['Shampoo', 'Soap', 'Sponge', 'Water'];

		function checkSessionStorage() {
			try {
				createStore();
				displayCart();
			} catch (e) {
				if (!e) {
					return alert('Sorry, your browser does not support Web storage. Try again with a better one');
				}
			}
		}

		function addItemToCart(item) {
			console.log('Clicked')
			sessionStorage.setItem(item, 'true');
		}

		function createStore() {
			const ul = document.createElement('ul');
			document.querySelector('body').appendChild(ul);

			availableItems.forEach(function (item) {
				const li = document.createElement('li');
				li.textContent = item;
				li.addEventListener('click', function () {
					addItemToCart(this.textContent);
				});
				ul.appendChild(li);
			});
		}

		function displayCart() {
			const body = document.body;
			const p = document.createElement('p');
			const text = document.createTextNode(`You previously had ${sessionStorage.length} items in your cart`);
			console.log(text);

			if (sessionStorage.length > 0) {
				p.appendChild(text);
				body.appendChild(p);
			}
		}

		checkSessionStorage();

	</script>
</body>

</html>
